<!DOCTYPE HTML>
<!--
	Read Only by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Low Power Rangers</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body>

		<!-- Header -->
			<section id="header">
				<header>
					<span class="image avatar"><img src="images/logo.jpg" alt="" /></span>
					<h1 id="logo"><a href="#">Low Power Rangers</a></h1>
					<p>18-549 Capstone Project
					</p>
				</header>
				<nav id="nav">
					<ul>
						<li><a href="#one" class="active">About</a></li>
						<li><a href="#vid">Video</a></li>
						<li><a href="#pics">Pictures</a></li>
						<li><a href="#docs">Documentation</a><li>
						<li><a href="updates.html">Updates</a></li>
					</ul>
				</nav>
				<footer>
					<ul class="icons">
						<li><a target="_blank" href="https://github.com/nshoemaker/LowPowerRangers" class="icon fa-github"><span class="label">Github</span></a></li>
					</ul>
				</footer>
			</section>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<div id="main">

						<!-- One -->
							<section id="one">
								<div class="container">
									<header class="major">
										<h2>Low Power Rangers</h2>
										<p>18-549 Capstone Project <br/>
										</p>
									</header>
									<p> 

										Team 20: Clayton Ritcher, Nora Shoemaker, Shashwat Srivastava 
									</p>
									<div class="inline_block">
									<p>
										<span class="image left"><img src="images/logo.jpg" alt="" /></span>
										We are three Electrical and Computer Engineering students at Carnegie Mellon University working on our senior capstone. This website is meant to track the progress of our project over the Spring 2016 semester.  
									</p>
									<p><a href="https://github.com/nshoemaker/LowPowerRangers" target="_blank">Source Code on GitHub</a></p>
								</div>
								</div>
							</section>

							<!-- Implementation -->
							<section id="vid">
								<div class="container">
									<h3>Video</h3>
								</div>
							</section>

							<!-- Implementation -->
							<section id="pics">
								<div class="container">
									<h3>Pictures</h3>

										<div class="box alt">
											<div class="row 50% uniform">
												<div class="4u"><span class="image fit"><img src="images/block1.jpeg" alt="" /></span></div>
												<div class="4u"><span class="image fit"><img src="images/block2.jpeg" alt="" /></span></div>
												<div class="4u"><span class="image fit"><img src="images/block6.jpg" alt="" /></span></div>
											</div>
											<div class="row 50% uniform">
												<div class="4u"><span class="image fit"><img src="images/block4.jpeg" alt="" /></span></div>
												<div class="4u"><span class="image fit"><img src="images/block5.JPG" alt="" /></span></div>
												<div class="4u"><span class="image fit"><img src="images/block3.jpeg" alt="" /></span></div>
											</div>
											<div class="row 50% uniform">
												<div class="4u"><span class="image fit"><img src="images/block7.jpg" alt="" /></span></div>
												<div class="4u"><span class="image fit"><img src="images/block8.jpg" alt="" /></span></div>
												<div class="4u"><span class="image fit"><img src="images/block9.jpg" alt="" /></span></div>
											</div>
										</div>
								</div>
							</section>

							<!-- Concpet -->
							<section id="docs">
								<div class="container">
									<header class="major">
										<h2>Documentation</h2>
									</header>
									<h3>Concept</h3>
									<div class="inline_block">
									<p>
										<span class="image right"><img src="images/angle_and_range.JPG" alt="" /></span>The goal of our project is to create a real time web API for relative <b>angle</b> and <b>range</b> information of a Tag from a measurement device.
									</p>
								</div>
								<div class="inline_block">
									<p>
										<span class="image left"><img src="images/wall.jpeg" alt="" /></span>
										To do this, we plan to use two fixed ultra wide band (UWB) radio transceivers (called <b>Anchor</b>s) to collect Angle of Arrival (AoA) and Time of Flight (TOF) information of signals from a third, mobile UWB transceiver (called a <b>Tag</b>).
									</p>
								</div>
								</div>
							</section>
							<section id="motivation">
								<div class="container">

									<h3>Motivation</h3>
									<p>
										Indoor position tracking applications are limitless -- from home automation, to security, or even finding your keys.
										Currently, indoor postion tracking systems are either too inaccurate for many of these applications, require extensive infrastructure, or are too expensive to achieve widespread adoption.
										<br><br>
										Our goal is to create an inexpensive plug-and-play device that precisely measures its range and angle from a Tag to support these types of applications.
									</p>
								</div>
							</section>
							<section id="compa">
								<div class="container">
									<h3>Competitive Analysis</h3>
									<p>No current solutions exist that use UWB radios to measure range and angle to a device. Several systems exist that could be used for similar applications, though. For instance:</p>
									<div class="features">
										<article>
											<a href="http://redpin.org/" class="image"><img src="images/redpin.png" alt="" /></a>
											<div class="inner">
												<h4>Wifi-based</h4>
												<p><a href="http://redpin.org/">Redpin</a> is an open source indoor positioning system that was developed with the goal of providing at least <b>room level accuracy</b>. This technology can be used on any wifi-connected device. Its utilization of current WiFi infrastructure makes it easy to adopt, but its accuracy rules it out for some applications.</p>
											</div>
										</article>
										<article>
											<a href="http://estimote.com/" class="image"><img src="images/estimote.png" alt="" /></a>
											<div class="inner">
												<h4>Bluetooth Low Energy (BLE) Beacons</h4>
												<p><a href="http://estimote.com/">Estimote</a> is a company that creates small, wireless BLE radios that can be attached to any location or object in order to track surrounding smartphones. Estimote also has an SDK on top of which apps can be written in order to interact with their radios. Estimote boasts an average <b><a href="https://community.estimote.com/hc/en-us/articles/201302836-How-precise-are-Estimote-Beacons-">measurement error of 20-30% of actual distance</a></b>. Estimote's SDK and battery operated beacons make installation easy, but because error grows with the distance from the beacons, high accuracy requires many beacons in the space.</p>
											</div>
										</article>
										<article>
											<a href="http://www.decawave.com/" class="image"><img src="images/decawave.jpg" alt="" /></a>
											<div class="inner">
												<h4>Ultra Wide Band (UWB)</h4>
												<p>UWB radios use time of flight (TOF) analysis to gain distance readings with <b>sub-meter accuracy</b>. Because UWB radios are not yet ubiquitous (not in phones like BLE or WiFi), UWB tracking is often used in custom installations which are expensive. Additionally, the biggest player in the production of UWB transceivers, <a href="http://www.decawave.com/">Decawave</a>, is a closed source shop and charges large amounts to gain access to their <a href="http://www.decawave.com/products/trek1000" >development kits</a>.</p>
											</div>
										</article>
									</div>
								</div>
							</section>

							<!-- Use Cases -->
							<section id="use_cases">
								<div class="container">
									<h3>Use Cases</h3>
									<div class="inline_block">
										<p>Because our final product is an API, our use cases can be thought of possible applications built on top of our API. Because our API is so general, there are many, many possible applications, so we will focus on one single example.</p>
										<h4>Indoor Localization Radar</h4>
										<p>We've all been there. Lost our phone somewhere in our house, but unable to find it (of course, it's placed on silent...sigh). Find my iPhone and other wifi-based localization apps will tell you your phone is in the building (great, you already knew that), but what you really want to know is where in the room it is.</p>
										<p>With our indoor localization radar app, all you have to do is place a small tag on your phone, and we will be able to tell you not only which room it is in, but where inside the room it is.</p>
									<p>
										<span class="image right"><img src="https://raw.githubusercontent.com/nshoemaker/LowPowerRangers/master/Docs/Images/Overall%20App%20Design.png" alt="" /></span>The app idea is to make an Android mobile application which can use data it receives from the server to show the most recent position of the tag being tagged. To do this the Android app will connect to the website and pull information and update the locations of the tags on screen. 
										<p>
										The main screen will have dots whcih move around representing different tags. </p>
									</p>
									<p>The dot representing the tag will move around as required. The position of the tag is fixed at the top of the screen and the user will have to orient himself that way as there is no way of knowing which direction the user is relative to the anchors.</p>
								</div>
								<div class="inline_block">
									<p>
										<span class="image left"><img src="https://raw.githubusercontent.com/nshoemaker/LowPowerRangers/master/Docs/Images/New%20Tag%20Menu.png" alt="" /></span>
										It will allow the user to add new tags by entering their tag ID and a name for them.
										<p>This menu comes up when the user presses the plus button to add a new tag. The user can then enter a tag ID and the application will check to make sure it exists and if it does, add it to the main screen.</p>

									</p>
								</div>
									<h4>Other Possible Use Cases</h4>
									<ul>
										<li>Invisible fence</li>
										<li>Proximity light activation</li>
										<li>Tracking mobility over time</li>
									</ul>
								</div>
							</section>

							<section id="reqs">
								<div class="container">

									<h3>Requirements</h3>

									<h4>Functional Requirements</h4>
									<ul class="alt">
										<li>Range and angle data shall be available through a web-accessible API.</li>
										<li>Tag shall be portable (battery powered) as to allow tracking of mobile objects.</li>
									</ul>

									<h4>Quality Attributes</h4>
									<ul class="alt">
										<li>Range and angle data should be available through the API in under two seconds after the data is collected.</li>
										<li>Range and angle data shall be collected at a rate of at least 1 Hz.</li>
										<li>Tag shall be able to run at least two hours on a full battery.</li>
										<li>Webserver shall be able to handle load of up to 100 requests per second.</li>
									</ul>


									<h4>Constraints</h4>
									<ul class="alt">
										<li>Budget of $700.</li>
										<li>10 week project timeline.</li>
										<li>3 team members.</li>
									</ul>

									<h4>Stretch Goals/Possible Extensions</h4>
									<ul class="alt">
										<li>A ‘radar’ app for finding your keys, phone, etc (anything with a Tag attached).</li>
										<li>A client app that integrates the system with <a target="_blank" href="http://ifttt.com">IFTTT</a>, allowing actions such as turning on the TV when you sit on the couch.</li>
										<li>Add a third Anchor, making an ‘L’ with the other two, in order to measure both the vertical and horizontal angle of arrival.</li>
										<li>Ability to change the baseline distance between the measurement Anchors without manually changing the configuration parameters in the code.</li>
									</ul>
								</div>
							</section>
							<section id="techspecs">
								<div class="container">

									<h3>Technical Specifications</h3>

									<h4>Parts List</h4>
									<div class="box alt">
											<div class="row 50% uniform">
												<div class="4u"><span class="image fit"><img src="images/raspi.jpg" alt="" /></span></div>
												<div class="4u"><span class="image fit"><img src="images/dwm.jpg" alt="" /></span></div>
												<div class="4u"><span class="image fit"><img src="images/atmega.jpg" alt="" /></span></div>
											</div>
											<div class="row 50% uniform">
												<div class="4u"><span class="image fit">
													<h5>Raspberry Pi</h5>
													<p>The <a target="blank" href="https://www.sparkfun.com/products/13724">Raspberry Pi</a> will do the math to determine angle of arrival and range and will also report new data to our webserver.  
													</p>			
													</span></div>
												<div class="4u"><span class="image fit">
													<h5>Decawave DWM1000 Module</h5>
													<p>The <a href="http://www.semiconductorstore.com/cart/pc/viewPrd.asp?idproduct=50013">DWM1000</a> is the wireless radio tranceiver that allows the Tags and Anchors to talk to eachother in order to determine their distances from each other. Each Tag/Anchor will have one of these.
													</p>	
												</span></div>
												<div class="4u">
													<span class="image fit">
														<h5>ATMega328</h5>
														<p>The <a href="http://www.mouser.com/ProductDetail/Atmel/ATMEGA328P-PU/?qs=K8BHR703ZXguOQv3sKbWcg%3D%3D&gclid=CjwKEAiA__C1BRDqyJOQ8_Tq230SJABWBSxnq4t6W6Tp6DzcyCqWLSnFywsY_JBwMrpBtNGaJ_HgZhoCJADw_wcB">ATMega328</a> microcontroller will boss around the DWM1000s and tell them what to do. Our homemade communication protocol will be implemented on these puppies. Each Tag/Anchor will have one of these.  
														</p>	
													</span>
												</div>
											</div>
											<div class="row 50% uniform">
												<div class="4u"></div>
												<div class="4u"><span class="image fit"><img src="images/ftdi.png" alt="" /></span></div>
												<div class="4u"></div>
											</div>
											<div class="row 50% uniform">
												<div class="4u"></div>
												<div class="4u">
													<span class="image fit">
														<h5>FTDI Cable</h5>
														<p>An <a href="https://www.sparkfun.com/products/9717">FTDI Cable</a> will connect each of our Anchors to the Raspberry Pi. It's in charge of bringing power to the Anchors as well as allowing them to send their range calculations to the Raspberry Pi.
														</p>	
													</span>
												</div>
												<div class="4u"></div>
											</div>
										</div>
									
									<h4>Protocols Used</h4>
									<div class="box alt">
											<div class="row 50% uniform">
												<div class="4u"><span class="image fit"><img src="images/spi.jpg" alt="" /></span></div>
												<div class="4u"><span class="image fit"><img src="images/uwbproto.jpg" alt="" /></span></div>
												<div class="4u"><span class="image fit"><img src="images/http.png" alt="" /></span></div>
											</div>
											<div class="row 50% uniform">
												<div class="4u"><span class="image fit">
													<h5>SPI</h5>
													<p>We will use SPI protocol for communication between the microcontrollers and the DWM1000 modules.  
													</p>			
													</span></div>
												<div class="4u"><span class="image fit">
													<h5>Homemade Ranging Protocol</h5>
													<p>For communication between Tags and Anchors, we will define and implement our own communication protocol.
													</p>	
												</span></div>
												<div class="4u"><span class="image fit">
													<h5>HTTP</h5>
													<p>We will use HTTP protocol for communication between the Raspberry Pi and the Webserver. Additionally, Clients will use HTTP to communicate with our web API. 
													</p>	
												</span></div>
											</div>
											<div class="row 50% uniform">
												<div class="4u"></div>
												<div class="4u"><span class="image fit"><img src="images/uart.jpg" alt="" /></span></div>
												<div class="4u"></div>
											</div>
											<div class="row 50% uniform">
												<div class="4u"></div>
												<div class="4u">
													<span class="image fit">
														<h5>UART/USB</h5>
														<p>The FTDI cable mentioned above will allow the Anchors to send their measurements to the Raspberry Pi. The Anchors will write these values out using UART serial and a chip in the cable will convert these signals into USB protocol for the Raspberry Pi.
														</p>	
													</span>
												</div>
												<div class="4u"></div>
											</div>
										</div>
									</div>
							</section>

							<!-- Architecture -->
							<section id="arch">
								<div class="container">
									<h3>Architecture</h3>
									<div class="inline_block">
										<p>Below is a physical architectural diagram of our system including possible client applications. This diagram is meant to show the system structure and communication types. The blue boundary represents our system boundary. The purple boundary is meant to represent the physical and logical boundary of each Anchor/Tag. </p>
										<p>UWB communication is used to obtain the range data between each of the Anchors and the Tag using TOF analysis. Microcontrollers on each Tag/Anchor talk to the DWM1000 chip through SPI. Once each of the Anchors know their distance from the Tag, this information will be sent to the Raspberry Pi, along with the Tag ID. The Raspberry Pi will then compute the angle of arrival based on the two range estimates and the known distance between the Anchors. Once the angle of arrival is calculated, the range between the Tag and the midpoint of the Anchors will be calculated and these two pieces of data will be sent to the web server, with the Tag and measurement device IDs, through an internal API call. </p>
										<img src="images/arch.png" alt="">
								</div>
								</div>
							</section>

							<!-- Interaction Diagrams -->
							<section id="interaction_diagrams">
								<div class="container">
									<h3>Interaction Diagrams</h3>
									<div class="inline_block">
										<h4>API-level Interaction</h4>
										<p>At a higher level, our project itself has very little user interaction (by design, for ease of use); the user simply needs to carry a Tag with them while in the presence of a measurement device to use the system itself. However, here is what we would expect user interaction with a client application to look like:</p>
										<img src="images/user_interaction.JPG" alt="">
									</div>

									<div class="inline_block">
										<h4>Internal Sysem Interaction</h4>
										<p>The goal of our system is to collect range and angle of arrival information about a single Tag, relative to a measurement device, over a period of time and create a web API from which applications can retrieve this information. </p>
										<p>The diagram shows the interaction between various components going through the process of collecting range and angle of arrival information for a single point in time.</p>
									<p>
										<span class="image left"><img src="images/RangeInteraction.png" alt="" /></span>
										<h5>Steps:</h5>
										<ol>
											<li><b>Poll</b> - Tag polls both Anchors in a broadcasted message.</li>
											<li><b>ResponseA</b> - Anchor A sends response to Tag.</li>
											<li><b>ResponseB</b> - Anchor B sends response to Tag.</li>
											<li><b>Final</b> - Tag broadcasts Final message to Anchors containing enough information for each Anchor to estimate range.</li>
											<li>Anchors tell Raspberry Pi their newly calculated range values. </li>
											<li>Raspberry Pi calculates angle of arrival and then makes API call to store new data on the Webserver. </li>
									</p>
									</div>


									<div class="inline_block">
										<h4>Ranging Protocol</h4>
										<p>At an even lower level, we need to define a ranging protocol across DWM1000s. </p>
										<p>For our protocol, we chose a variant of the Broadcast-Double-Sided Ranging (BDSR) protocol. This protocol has the Tag broadcast its messages, and lets all other devices respond in a staggered format.</p>
										<p>Below is a diagram showing the BDSR protocol with three anchors where Tprop is the propagation time between the Tag and the corresponding Anchor. </p>
									</div>

									<div class="inline_block">
										<img class="smallwidth" src="images/bdsr.JPG" alt="">
									</div>

									<div class="inline_block">
										<p>We chose to implement a variant of BDSR with only two Anchors.</p>
										<img src="images/RangeLargeText.png" alt="">
										<p>Message data sent throughout different steps of protocol:</p>

											<table class="alt">
												<thead>
													<tr>
														<th>Protocol Step</th>
														<th>Data Sent</th>
													</tr>
												</thead>
												<tbody>
													<tr>
														<td>Poll/td>
														<td>Range Session ID, Tag Address</td>
													</tr>
													<tr>
														<td>Response</td>
														<td>Range Session ID, Anchor ID</td>
													</tr>
													<tr>
														<td>Final</td>
														<td>Range Session ID, Tag Address, Tround1A, Treply2A, Treply1B, Treply2B</td>
													</tr>
												</tbody>
											</table>
										<p>One thing to note is that, at the end of our protocol, the information necessary to calculate propagation times is available on the Anchors but not the Tags. This is okay for our use case because (as you can see in the sytem interaction diagram) the Anchors are the ones who send the Raspi the range data, not the Tags. </p>
									</div>
								</div>
							</section>

					</div>

				<!-- Footer -->
					<section id="footer">
						<div class="container">
							<ul class="copyright">
								<li>&copy; 2016. Low Power Rangers.</li>
							</ul>
						</div>
					</section>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollzer.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>
